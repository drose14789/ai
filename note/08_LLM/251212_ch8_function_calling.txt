함수 호출 기능은 모델이 사전에 정의된 함수를 필요에 따라 실행하도록 도와주는 강력한 도구. 
이 기능을 통해 어시스턴트는 자체 지식에 없는 **실시간 정보 조회**나 **복잡한 계산 작업** 등을 
외부 함수에 위임할 수 있음. 예를 들어 사용자가 날씨를 물어보면, 어시스턴트는 날씨 API와 연결된 
함수를 호출하여 최신 기온을 가져온 뒤 응답할 수 있음.

- **실시간/외부 데이터 활용:** 모델이 최신 정보(날씨, 주가, 뉴스 등)를 함수로부터 받아와 
  답변에 반영할 수 있음.
- **모델 한계 보완:** 수학 계산, 데이터베이스 질의 등 모델이 직접 처리하기 어려운 요청을 외부 
  로직으로 해결할 수 있음.
- **도메인 확장:** 개발자가 정의한 임의의 함수로 모델의 기능을 확장할 수 있어, 특정 분야나 
  서비스에 특화된 어시스턴트를 구현할 수 있음

예를 위해 간단한 `get_weather` 함수를 정의함. 
이 함수는 위도(latitude)와 경도(longitude)를 받아 해당 위치의 현재 기온을 섭씨로 반환. 
구현에는 오픈 메테오(Open-Meteo)라는 공개 기상 API를 사용하여, 주어진 좌표의 현재 기온 
데이터를 가져옴. 함수는 `requests` 라이브러리를 통해 API를 호출하고, 응답 JSON에서 온도 
값을 추출하여 반환

`tools`라는 리스트에 함수 정보를 구성. 각 함수 툴에는 이름(name), 설명(description), 
그리고 매개변수(parameters) 스키마를 지정해야 함. 아래 코드에서는 `type`: "function"으로 함수를 
정의하고, `name`: "get_weather", `description`: "저장된 좌표의 현재 온도를 섭씨 단위로 구합니다"
와 같이 설정. 또한 `parameters` 필드에 함수가 요구하는 인자들의 JSON 
스키마(여기서는 latitude와 longitude 숫자형, 둘 다 필수)를 명시

다음 어시스턴트에게 보낼 `messages`를 준비. 사용자의 질문으로 "오늘 서울 날씨 어때요?"라는 
메시지를 추가하겠음. 이제 이 사용자 메시지와 함께 `client.chat.completions.create`를 호출하여, 
모델의 응답을 받아보겠음. `tools` 파라미터에 앞서 정의한 함수 정보를 포함시켰으므로, 
모델은 답변 과정에서 이 함수를 호출할 수 있게 됨.
모델이 함수 호출을 결정하면, 응답으로 일반 텍스트 대신 **함수 호출 요청**을 반환하게 됨. 
즉, 어시스턴트는 직접 답을 주는 대신 `get_weather` 함수를 특정 인수로 호출하라는 정보를 주게 
됨. 

모델이 함수 호출 요청을 반환했다면, 이제 개발자 측에서 해당 함수를 실제로 실행하고 그 결과를 
어시스턴트에게 전달해야 함. 
여기에는 호출하려는 함수 이름과 전달된 인자들이 포함되어 있음. 우리 예시의 경우 모델은
 `get_weather` 함수를 호출하도록 응답했을 것이며, 서울의 위도와 경도에 해당하는 값을 인자로 
제공했을 것임. 
모델이 반환한 함수 호출 정보 (tool_call)를 이용해 실제 `get_weather` 함수를 실행하고, 
그 결과(현재 기온)를 얻어봄. 그런 다음 이 결과를 다시 대화의 맥락에 추가하여, 어시스턴트가 
최종 답변을 생성할 수 있도록 함

함수 실행 결과를 어시스턴트 대화에 추가해 봄. 'messages.append(...)`를 사용하여, 먼저 
어시스턴트의 함수 호출 메시지를 대화 내역에 넣고, 이어서 'tool' 역할의 메시지를 추가함.
이 'tool' 메시지에는 함수 호출의 `id`와 실행 결과를 문자열로 담았음. 이렇게 하면 OpenAI API는 
해당 함수 호출에 대한 결과를 받았다고 인식하게 됨